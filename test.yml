# https://blog.daemonl.com/2016/02/yaml.html
---
intro:
  desc: >
  You awaken in your dorm room to the clarion sound of your haphazard tower of styrofoam noodle cups and pizza boxes collapsing. 
  There is no apparent cause, so presumably structural fatigue. 
  Your roommate is nowhere to be seen. 
  You are tired and have a headache. 
  You need a shower.

items:
  - &foo
    weight: 1
    desc: this foo is red and weighs 1
  - &bar
    weight: 2
    desc: this bar is blue and weighs 2

  - &bed
    desc: >
      You promise it's only this messy because you just got up!
    take:
      desc: >
        It's bolted to the wall.
      chance: 0
      outcome: null
      require:
        item: towel
        status: hydrate
    use:
      desc: >
        It is still warm, and so comfy.
        You guess you didn't have anything important to do anyway.
      chance: 1
      outcome: end

  - &garbage
    alt: ["garbage pile", "pile", "trash"]
    desc: >
      The pile is only partially collapsed and remains precarious.
    take: 
      desc: >
        And what, put a giant pile of trash in my pocket?
      chance: 1
      outcome: null
    use:
      desc: >
        For what, exactly?

  - &desk
    desc: >
      Your desk, comparatively uncluttered but with a worn spot
      where you normally rest your head. You see your water bottle,
      a sandwich, and a mechanical engineering textbook.
      Below the desk is your trash can.
    take:
      desc: >
        It's bolted to the floor.
      chance: 0
      outcome: null
    use:
      desc: >
        The bed is comfier.

  - &water
    alt: ["water bottle", "bottle"]
    look:
      chance: 1
      require: hydrate
      fail:
        desc: >
          Your trusty water bottle. It is covered with anime stickers.
          You could probably remove the bottle, and the stickers would still be watertight.
        action: null
      pass: 
        desc: That Megumin sticker is cute.
        action: null
    take:
      chance: 0
      required: null
      fail: 
        desc: >
          Why would you want to keep that on your person in your own room?
        action: null
      pass:
        desc: ""
        action: null
    use:
      chance: 1
      required: hydrate
      fail: 
        desc: >
          You take a long pull of lukewarm water. 
          You must have been dehydrated because your headache dissipates and your head clears. You remember that you have a dresser!
        action: hydrate
      pass:
        desc: >
          You are no longer thirsty. That Megumin sticker is cute, though
        action: null

  - &sandwich
    desc: >
      A sandwich of uncertain provenance. There are no visible signs of danger.
    take:
      desc: >
        Doesn't really seem very handy to carry around.
      chance: 0
      outcome: take
    use:
      chance: 1
      desc: >
        You take a big bite and immediately realize that not all dangers are visible. Without even getting a chance to swallow, you are doomed.
      outcome: end

  - &textbook
    alt: ["mechanical engineering textbook"]
    desc: >
      A super boring textbook/sedative combo.
      Contains various diagrams and techniques for structural and mechanical engineering.
    take:
      desc: >
        But it's heavy!
      chance: 0.5
      outcome:
        pass: take
    use:
      desc: >
        Against all odds, you already finished that homework. Strictly speaking.

  - &trashcan
    desc: >
      It is very full, ergo the garbage pile.
    take:
      desc: >
        That sounds hazardous.
      chance: 0
    use:
      desc: That ship has sailed.

  - &dresser
      look:
        chance: 1
        require: hydrate
        fail:
          desc: What dresser?
        pass: 
          desc: A utilitarian dorm dresser, attached to the wall.
      take:
        chance: 1
        required: hydrate
        fail: 
          desc: What dresser?
        pass:
          desc: It's literally attached to the wall.
      use:
        chance: 1
        required: hydrate
        fail: 
          desc: What dresser?
        pass:
          desc: >
            Searching through the dresser's mostly barren drawers (standing on the rug made of dirty laundry in front of it), you find a phenomenal treasure: a clean towel!
          action: reveal towel
  - &towel
      look:
        chance: 1
        pass:
          desc: A pristine, possibly never-used cheap blue towel from Target.
      take:
        chance: 1
        pass:
          desc: You drape the towel over your neck. Towel acquired!
          action: [take]
      use:
        chance: 1
        pass:
          desc: >
            You're perfectly dry.

rooms:
  &bedroom bedroom:
    desc: >
      You are standing next to your bed.
      You see your desk and the garbage pile.
      To the East lies your roommate's area.
      To the South lies the door to the hallway (and showers).
    items:
      bed: *bed
      garbage: *garbage
      desk: *desk
      water: *water
      sandwich: *sandwich
      textbook: *textbook
      trashcan: *trashcan
      towel: 
        <<: *towel
        hidden: true
  &roommate roommate:
    enter: You walk over to your roommate's area of the room.
    desc: It is completely pristine, like an architecture magazine. You see her bed, her desk, and her dresser.
    items:
      bed: 
        <<: *bed
        look:
          chance: 1
          desc: >
            Her bed is perfectly made. You are nervous to stand next to it for fear of messing it up by causing air currents.
        take:
          chance: 0
          desc: >
            It's attached to the wall, and your roommate's hands would be attached to your throat if you messed it up.
        use:
          chance: 0
          fail:
            desc: It's as good a death bed as any, but I'd rather live.

      desk: 
        <<: *desk
        look:
          chance: 1
          desc: >
            Her desk is spotless and has nothing on it.
            You dare not change either of those facts.
            Under the desk is her trashcan.
          outcome: reveal trashcan
        take:
          chance: 0
          fail: 
            desc: >
              It's bolted to the floor, and what would you even do with it?
        use:
          chance: 0
          fail:
            desc: I don't have any trash to put in it.
      trashcan:
        <<: *trashcan
        hidden: true
        look:
          chance: 1
          desc: >
            It is empty and strangely clean. It's almost asking to be filled.
        take:
          chance: 1
          desc: >
            You grab the trashcan. Maybe you can do some cleaning up.
          outcome: [take]
        use:
          chance:
          desc: www
      dresser: 
        <<: *dresser
        look:
          chance: 1
          desc: >
            She would kill you if you went through those drawers. On top you see two meticulously folded towels.
          outcome: reveal towels
        take:
          chance: 0
          fail: 
            desc: It's bolted to the wall, and too heavy anyway.
        use:
          chance: 0
            fail:
              desc: I dare not.
      towels:
        <<: *towel
        alt: [towel]
        look: 
          chance: 1
          desc: They are perfectly folded and fluffy from the laundry.
        take:
          chance: 1
          desc: >
            Take towel (or towels):
            You reach for the towels, then have a panic attack imagining what she will do to you when she gets home. Your poor heart cannot take it.
          outcome: end
        use:
          chance: 0
          fail:
            desc: You're completely dry, and also you don't want to be stabbed when she gets home.

  &test test:
    desc: >
      You are standing next to your bed.
      You see your desk and the garbage pile.
      To the East lies your roommate's area.
      To the South lies the door to the hallway (and showers).
    items:
      foo: *foo
      bar: *bar
  &a asdf:
    desc: |
      this is embarasing, you see your roomate changing
    items: {}
  &b sdfg:
    desc: |
      woops, wrong bathroom
    items: {}
  &c dfgh:
    desc: |
      the kitchen is looking empty
    items: {}

start: *a
finish: *test
map:
  *a:
    s: *c
    e: *b
  *b:
    s: *test
    w: *a
  *c:
    n: *a
    e: *test
  *test:
    n: *b
    w: *c

verbs:
  look: ["look at"]
  take: ["fetch", "grab"]
  use: []
  move: ["go"]
  quit: ["q"]